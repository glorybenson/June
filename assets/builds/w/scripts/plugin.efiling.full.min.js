function edit_contact(contactid,callback){var div=jQuery("<div title=\"Edit Contact Details\" id=\"contact-editor\"><center><br/><img src='/assets/loaders/default.gif' alt='Loading'/></center></div>");div.dialog({modal:!0,height:160,width:265,open:function(){jQuery(this).load("/ejax-edit-contact/?i="+contactid+"&callback="+callback)},close:function(){jQuery(this).dialog("destroy").remove(),void 0!==callback&&eval(callback)}})}function remove_order_line(lid,cb){jQuery.get("/ejax-remove-orderline/",{lid:lid},function(data){var OrderLine=jQuery.parseJSON(data);eval(cb+"(OrderLine)")})}function initialise_widgets(){parseFloat(jQuery.fn.jquery)<=2.2&&jQuery(".efButton").button(),jQuery(".efTable").addClass("ui-widget-content"),"function"==typeof qtip&&jQuery(".efToolTip").not(".qtip").qtip()}function currency_format(e){var t=parseFloat(e),e=(t=isNaN(t)?0:t)<0?"-":"",t=Math.abs(t);return t=parseInt(100*(t+.005)),t/=100,s=new String(t),s.indexOf(".")<0&&(s+=".00"),s.indexOf(".")==s.length-2&&(s+="0"),s=e+s,s}function terminate_officer(e,t){if(void 0===e)return!1;if(void 0===t)return!1;var i="";i+='<div id="efTerminateOfficerAlert">',i+="<p>Would you like to terminate this officer at Companies House.</p>",i+='<a href="/efiling-officer-terminate/?o='+e.toString()+"&i="+t.toString()+'&postToCh=true" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only ef-yes"><span class="ui-button-text">Yes, terminate at Companies House.</span></a>',i+='<a href="/efiling-officer-terminate/?o='+e.toString()+"&i="+t.toString()+'" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only ef-no"><span class="ui-button-text">No, terminate company at eFiling.</span></a>',i+="</div>",jQuery("body").append(i),jQuery("#efTerminateOfficerAlert").dialog({title:"Terminate an officers.",height:140,width:500,modal:!0,close:function(){jQuery(this).remove()}})}function get_address(e,t,i){void 0===i&&(i=""),void 0===t&&(t="Choose Address"),jQuery("body").append('<div id="efGenericAddressGetter"><img style="display:block;margin:0 auto;padding-top:160px" src="/assets/loaders/default.gif" alt="Loading..."></div>'),jQuery("#efGenericAddressGetter").dialog({title:t,height:570,width:600,modal:!0,open:function(){jQuery.get("/ejax-get-address/","cb="+e+"&opts="+i,function(e){jQuery("#efGenericAddressGetter").html(e)})},close:function(){jQuery(this).remove()}})}function edit_address(e,t,i){void 0===t&&(t=""),void 0===i&&(i=""),jQuery('<div id="efEditInlineAddressDialog" title="Confirmation Required">\t<p>Are you sure you wish to edit this address?</p>\t<p>Do not use this option if you wish to use a different address.</p> <div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">  <div class="ui-dialog-buttonset">   <button type="button" text="confirm" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button" aria-disabled="false"><span class="ui-button-text">Confirm</span></button>   <button type="button" text="cancel" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button" aria-disabled="false"><span class="ui-button-text">Cancel</span></button>  </div> </div></div>').dialog({close:function(){jQuery("#efEditInlineAddressDialog").dialog("destroy").remove(),$("body").off("click","#efEditInlineAddressDialog [text='cancel']"),$("body").off("click","#efEditInlineAddressDialog [text='confirm']")},height:200,width:400,modal:!0}),$("body").on("click","#efEditInlineAddressDialog [text='cancel']",function(){$("#efEditInlineAddressDialog").dialog("close")}),$("body").on("click","#efEditInlineAddressDialog [text='confirm']",function(){$("#efEditInlineAddressDialog").dialog("close"),jQuery('<div title="Edit Address" id="efEditThisAddress">\t<div style="text-align:center;padding-top:100px">  <img src="/assets/loaders/default.gif" alt="Loading" /> </div></div>').dialog({modal:!0,height:460,width:420,open:function(){jQuery.get("/ejax-edit-address/","callback="+t+"&i="+e+"&opts="+i,function(e){jQuery("#efEditThisAddress").html(e)})},close:function(){jQuery(this).dialog("destroy").remove(),jQuery("#efEditInlineAddressDialog").dialog("destroy").remove()}})})}function upper_case_this(e){jQuery(e).val(jQuery(e).val().toUpperCase())}function IsEmail(e){return 1==/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(e)}function IsInt(e){}function GetUrlVars(){var n={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,t,i){n[t]=i});return n}function show_company_form(e,i,n,o){var t=[];t.NAME_CHANGE="Change of Company Name",t.REGOFFICE_CHANGE="Change of Registered Office",t.REGEMAIL_CHANGE="Change of Registered Email",t.CHANGE_ACC_DATE="Change of Accounting Reference Date",t.ANNUAL_RETURN="Annual Return",void 0===n&&(n="0"),jQuery('<div class="efCompanyForm" id="efCompanyForm_'+e+'" title="'+t[e]+'"><div class="efDialogLoading"><img src="/assets/loaders/default.gif" alt="Loading"/></div></div>').dialog({modal:!0,resizable:!1,dialogClass:"efCompanyForm_"+e,minHeight:200,open:function(){var t=jQuery(this);t.parent(".ui-dialog").css("width","auto"),jQuery.get("/ejax-company-form-"+e+"/",{i:i,o:n,jason:o},function(e){t.html(e),t.dialog("option","position",t.dialog("option","position"))})},close:function(){jQuery("#efCompanyForm_"+e).dialog("destroy").remove()}})}function show_modal_loader(e,t){e=jQuery('<div style="width:'+t.css("width")+';" class="efDialogLoading efModalDialogSubmit" id="efModalDialogSubmitLoader"><p>'+e+'</p><p><img src="/assets/loaders/default.gif" alt="Loading"/></p></div>');t.css("visibility","hidden"),t.before(e)}function hide_modal_loader(e){jQuery("#efModalDialogSubmitLoader").remove(),e.css("visibility","visible")}function _GET_(e){e=e.replace(/[[]/,"[").replace(/[]]/,"]");e=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==e?"":e[1]}function str_pad(e,t){for(var i=""+e;i.length<t;)i="0"+i;return i}function loading_dialog(e){var t=jQuery.extend({title:"Loading",modal:!0,resizable:!1,draggable:!1,autoOpen:!0},e),e="this_is_the_loading_dialog";jQuery(e).length&&jQuery(e).dialog("destroy").remove();e=create_dialog_div({title:t.title,id:e});return jQuery("#"+e).html('<div style="padding:20px;text-align:center;">Loading...<br /><br /><img src="/assets/loaders/default.gif" alt="Loading..." /></div>').dialog({draggable:t.draggable,modal:t.modal,resizable:t.resizable,autoOpen:t.autoOpen}).closest(".ui-dialog").find(".ui-dialog-titlebar").remove(),e}function loading_dialog_close(){jQuery("#this_is_the_loading_dialog").dialog("destroy").remove()}function create_dialog_div(e){var t=(t="dialog"+Math.random()).replace(".",""),t=jQuery.extend({title:"Efiling Dialog",id:t},e),e=jQuery("<div></div>").attr("id",t.id).attr("title",t.title);return jQuery(e).html('<center><br /><br /><br /><br />Loading...<br /><br /><br /><br /><img src="/assets/loaders/default.gif" alt="Loading..." /></center>').hide().prependTo("body"),t.id}function hasLowercase(e){return/[a-z]/.test(e)}function hasUppercase(e){return/[A-Z]/.test(e)}function hasNumber(e){return/[0-9]/.test(e)}function hasSpecialChar(e){return/[^a-zA-Z\d\s:]/.test(e)}function hasValidPasswordLength(e){return 8<=e.length}function registerPasswordConstraintsUi(e){e.addEventListener("focus",function(){document.getElementById("password-constraints").classList.remove("efHide")}),e.addEventListener("blur",function(){document.getElementById("password-constraints").classList.add("efHide")}),e.addEventListener("keyup",function(){var e=this.value;!0===hasLowercase(e)?document.querySelector("#password-constraint-lowercase img").classList.remove("efHide"):document.querySelector("#password-constraint-lowercase img").classList.add("efHide"),!0===hasUppercase(e)?document.querySelector("#password-constraint-uppercase img").classList.remove("efHide"):document.querySelector("#password-constraint-uppercase img").classList.add("efHide"),!0===hasNumber(e)?document.querySelector("#password-constraint-number img").classList.remove("efHide"):document.querySelector("#password-constraint-number img").classList.add("efHide"),!0===hasSpecialChar(e)?document.querySelector("#password-constraint-symbol img").classList.remove("efHide"):document.querySelector("#password-constraint-symbol img").classList.add("efHide"),!0===hasValidPasswordLength(e)?document.querySelector("#password-constraint-length img").classList.remove("efHide"):document.querySelector("#password-constraint-length img").classList.add("efHide")})}function password_reminder(e="#reminder"){jQuery(e).dialog({modal:!0,resizable:!1,open:function(){var e=jQuery(this);e.parent(".ui-dialog").css("width","auto"),e.dialog("option","position",e.dialog("option","position"))}})}function toggleTextFieldMask(e){var t=document.getElementById(e.getAttribute("data-owner"));"password"===t.type?t.type="text":t.type="password";e=t.nextElementSibling,t=t.nextElementSibling.nextElementSibling;e.classList.toggle("efHide"),t.classList.toggle("efHide")}function efStaticAutoComplete(a,s){var r;if(!a)return!1;function i(e){e&&(function(e){for(var t=0;t<e.length;t++)e[t].classList.remove("ef-autocomplete-active")}(e),e[r=(r=r>=e.length?0:r)<0?e.length-1:r].classList.add("ef-autocomplete-active"))}function d(e){for(var t=document.getElementsByClassName("ef-autocomplete-items"),i=0;i<t.length;i++)e!=t[i]&&e!=a&&t[i].parentNode.removeChild(t[i])}a.addEventListener("input",function(e){var t,i,n,o=this.value;if(d(),!o)return!1;for(r=-1,(t=document.createElement("DIV")).setAttribute("id",this.id+"autocomplete-list"),t.setAttribute("class","ef-autocomplete-items"),this.parentNode.appendChild(t),n=0;n<s.length;n++)s[n].substr(0,o.length).toUpperCase()==o.toUpperCase()&&((i=document.createElement("DIV")).innerHTML="<strong>"+s[n].substr(0,o.length)+"</strong>",i.innerHTML+=s[n].substr(o.length),i.innerHTML+="<input type='hidden' value='"+s[n]+"'>",i.addEventListener("click",function(e){a.value=this.getElementsByTagName("input")[0].value,a.setAttribute("value",a.value),d()}),t.appendChild(i))}),a.addEventListener("keydown",function(e){var t=(t=document.getElementById(this.id+"autocomplete-list"))&&t.getElementsByTagName("div");40==e.keyCode?(r++,i(t)):38==e.keyCode?(r--,i(t)):13==e.keyCode&&(e.preventDefault(),-1<r&&t&&t[r].click())}),document.addEventListener("click",function(e){d(e.target)})}function efAjaxAutoComplete(c,i){var n,o;if(!c)return!1;function a(){c.classList.remove("search-box-loader")}function s(e){var t,i=[],n=[],o=null,a=c.value;for(e.forEach(function(e){i.push(e.label),n.push(e)}),(t=document.createElement("DIV")).setAttribute("id",c.id+"-autocomplete-list"),t.setAttribute("class","ef-autocomplete-items"),c.parentNode.appendChild(t),o=0;o<i.length;o++){var s=n[o].label||"",r=n[o].icon||"",d=n[o].desc||"",l=n[o].url||"",u=null;(u=document.createElement("div")).setAttribute("data-url",l),u.innerHTML+="<i class='ef-icon "+r+"'></i>",s.substr(0,a.length).toUpperCase()==a.toUpperCase()?u.innerHTML+="<strong>"+s.substr(0,a.length)+"</strong>":u.innerHTML+=s.substr(0,a.length),u.innerHTML+=s.substr(a.length),u.innerHTML+="<p>"+d+"</p>",u.addEventListener("click",function(e){var t=this.getAttribute("data-url");0<t.length&&(window.location=t,f())}),t.appendChild(u)}}function r(e){e&&(function(e){for(var t=0;t<e.length;t++)e[t].classList.remove("ef-autocomplete-active")}(e),e[n=(n=n>=e.length?0:n)<0?e.length-1:n].classList.add("ef-autocomplete-active"))}function f(e){for(var t=document.getElementsByClassName("ef-autocomplete-items"),i=0;i<t.length;i++)e!=t[i]&&e!=c&&t[i].parentNode.removeChild(t[i])}c.addEventListener("input",function(e){var t=this.value;if(clearTimeout(o),f(),!t||t.length<3)return!1;o=setTimeout(function(){n=-1,c.classList.add("search-box-loader"),this.ajax=fetch(i+t).then(function(e){return e.json()}).then(s).then(a)},1e3)}),c.addEventListener("keydown",function(e){var t=(t=document.getElementById(this.id+"autocomplete-list"))&&t.getElementsByTagName("div");40==e.keyCode?(n++,r(t)):38==e.keyCode?(n--,r(t)):13==e.keyCode&&(e.preventDefault(),-1<n&&t&&t[n].click())}),document.addEventListener("click",function(e){f(e.target)})}jQuery(function(){initialise_widgets()});